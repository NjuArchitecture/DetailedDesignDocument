# SerachEngine 模块 #


## 一、概述 ##
### 承担的需求（主要秘密） ###
搜索引擎模块主要负责将爬虫获取的数据存储到数据库中并提供给前端一个高效可用的搜索接口。

其需要考虑的核心问题为：如何组织数据使得搜索变得高效。这个问题是由于搜索是系统的核心功能，相比于存储而言，搜索发生的频率会**更高且更集中**。由于商品的数据是**非结构化**数据，为了实现高效搜索，以保证服务器的**高可靠性和高可用性**，我们应当需要在数据存储的时候为它们建立适当的索引，并优化搜索结构，使得搜索能够快速高效的进行。为了实现以上设想，提出了以下存储流程设计：

1. 在存储数据的之前，首先对数据进行**预处理**。例如额外增加一个域：数据增加时间。这个域有以下用途：
	* 用于未来搜索可能的过滤条件，如仅仅返回特定时间之后的数据
	* 作为判定数据相关性权重的一个判定标准。顾客搜索商品肯定不太愿意搜索到过时的商品，因此时间较为久远的商品在计算相关性时应当较低 

2. 存储数据时，**分域存储**，如标题，描述，价格，图片，链接等。分域存储有以下考虑：
	* 使非结构化的商品信息部分变得结构化，便于搜索
	* 使得搜索时可以以某些域作为过滤的条件（如价格）
	* 每个域可以有不同的权重值作为
	
3. 商品存储完成之后，为其建立索引，用于现时段搜索主要是基于关键字搜索，因此索引也基于关键字建立。然而在建立关键字索引时有以下问题考虑：
	* 无效关键字：中文如“的” “你” “我”， 英文如"this", "that"等
	* 同义词如 华为,“huawei”， “tf卡”&“手机存储卡”
	* 同根词:主要是英文网站中的词汇，如 "created"&"creation"
	* 不同词汇优先级不同，如搜索华为手机，则华为二字的优先级相比手机更高（因其频率较低）
	* 不同关键字访问频率不同，有些商品会被频繁访问
	
	为了解决以上问题，我们需要一系列的处理流程来建立索引：
	
	* Tokenlization:序列化，移除标点符号，移除无效关键字
	* Normalization:token标准化，用一系列的filter来处理
		* Lowercase Filter: 全部转化为小写（针对英文）
		* Synomous Filter: 同义词用一个代替
		* Stem Filter: 转为为词干（中文则去除无效的介词等等）
	* Cache: 若包含高频关键字，将该商品信息纳入缓存中
	
	综上所述，存储的流程如下图所示：
	


### 用例图设计 ###



### 可能会修改的实现（次要秘密） ###
	
* 商品信息预处理算法
* 分域存储算法
* 无效关键字检测算法
* 同义词匹配算法
* 同根词匹配算法
* 词汇优先级算法
* 高频访问缓存算法

### 角色 ###

## 二、类的设计 ##

### 2.1 类图 ###

### 2.2 类描述 ###
#### XX类 ####

## 三、重要协作 ##
### 顺序图 ###

### 状态图 ###

## 四、设计模式应用 ##

### XXX设计模式 ###



